@using EStable.ViewModels.UserOfStableViewModels.Wizard.StepThree
@model ChargeTypesViewModel

@{
    ViewBag.Title = "Setup Wizard";
    ViewBag.Email = Model.Email;
    Layout = "~/Views/Wizard/_Layout.cshtml";
    var stableTypeCharges = Model.StableChargeTypes;
}
@*Styles*@
<link href="~/Content/Styles/jquery.dynatable.css" rel="stylesheet" />
<link href="~/Content/Styles/Wizard/StepThree.css" rel="stylesheet" />
<link href="~/Content/Styles/Wizard/WizardBase.css" rel="stylesheet" />

@*Javascript Libraries*@
<script src="~/Content/Javascript/Common/jquery-1.7.2.min.js"></script>
<script src="~/Content/Javascript/Common/jquery.dynatable.js"></script>
<script src="~/Content/Javascript/Common/EstableBase.js"></script>

@*Javascript Logic*@
<script src="~/Content/Javascript/Areas/Wizard/StableCharges/StableCharges.js"></script>
<script src="~/Content/Javascript/Areas/Wizard/StableCharges/StandardCharges.js"></script>

<div id="wizardStepCounter" class="wizard-step-counter">
    <img id="wizardStepImage" src="../../Content/Images/WizardSteps.png" />
</div>

<div class="wizard">
    <div id="stepTwo" class="">
        <div class="stable-name">
            @Model.StableName
        </div>
        @using (Html.BeginForm("PostStepThree", "Wizard"))
        {
            @Html.AntiForgeryToken()
            @Html.ValidationSummary(true)
            <div class="wizard-step-3">
                <h3>Step Three - Charge Types</h3>
                
                <div class="panel panel-default">
                    <div class="panel-heading tbl-heading">Stable Charge Types</div>
                    <div class="panel-body">
                
                        <div class="tbl-container">
                            <table class="table table-striped table-hover" id="tblStableCharges">
                                <thead class="dynatable-head">
                                    <th class="dynatable-head">Unit</th>
                                    <th class="dynatable-head">InStable</th>
                                    <th class="dynatable-head">Description</th>
                                    <th class="dynatable-head">Rate</th>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>    
                    
                        </div>
                        <script type="text/javascript">
                            createStableChargesTable('@Model.GetStableChargeTypesJson()');

                        </script>
                        
                        @Html.Partial("Partials/_AddStableChargeForm", new StableChargeTypeViewModel())
                        
                        

                        <div>
                            <a href="#" class="btn btn-sm btn-info" id="addStableCharge">Add a Stable Charge</a>
                            <span class="file-wrapper">
                                <input type="file" name="importStableCharges" id="importStableCharges" />
                                <span class="button btn btn-sm btn-info">Import Stable Charges</span>
                            </span>
                        </div>
                        
                       @* <a href="#" id="importStableCharges" class="btn btn-sm btn-info">Import Stable Charges</a> <input type="file" id="import"/>*@
                    </div>
                </div>
                @*--------------------------------------------------------------------------------------------------------------------------------------------*@
               
                <div class="panel panel-default">
                    <div class="panel-heading tbl-heading">Standard Charge Types</div>
                    <div class="panel-body">
                        <div class="tbl-container">
                            <table class="table table-striped table-hover" id="tblStandardCharges">
                                <thead>
                                    <th class="dynatable-head">Description</th>
                                    <th class="dynatable-head">Rate</th>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>    
                    
                        </div>
                        <script type="text/javascript">
                            createStandardChargesTable('@Model.GetStandardChargeTypesJson()');

                        </script>
                        
                        @Html.Partial("Partials/_AddStandardChargeForm", new StandardChargeTypeViewModel())
                        
                        <a href="#" class="btn btn-sm btn-info" id="addStandardCharge">Add a Standard Charge</a>
                
                    </div>
                </div>

                <input type="hidden" name="email" id="email" value="@Model.Email"/>
                <div class="buttons clear-both">
                    <div class="wizard-back-wrapper float-left">
                        <input class="btn btn-lg btn-default wizard-buttons" name="submit" id="back" type="submit" value="Back"/>
                    </div>

                    <div class="wizard-next-wrapper float-right">
                        <input class="btn btn-lg btn-primary wizard-buttons" name="submit" id="next" type="submit" value="Next"/>
                    </div>
                </div>
            </div>
        }
    </div>
</div>

